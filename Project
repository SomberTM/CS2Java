package game;

import java.util.ArrayList.*;
import java.awt.*; 
import javax.swing.*;
import java.awt.event.*; import java.awt.event.ActionEvent; import java.awt.event.ActionListener;

public class Game extends JApplet implements MouseListener, ActionListener, KeyListener {
    
    public boolean erase = false;
    public boolean jump = false;
    public int count = 0;
    public int x = 100;
    public int y = 200;
    public int w = 25;
    public int h = 25;
    public int lastX;
    public int lastY;
    
    Cube cube = new Cube();
    
    class Cube {
       
        public void cubeMoveRight(int xVel, int yVel) {
            x += xVel;
            y += yVel;
        }
        public void cubeMoveLeft(int xVel, int yVel) {
            x -= xVel;
            y -= yVel;
        }
        
        public void cubeJump(int jumpHeight) {
            y -= jumpHeight;
        }
        
        public void cubeFall(int fallVel) {
            if (y + h > 200) {
                cube.stopMove();
            } else {
                y += fallVel;
            }
        }
        
        public void stopMove() {
            x += 0;
            y += 0;
        }
    }
    public void init() {
        final int tick = 1000;
        Timer timer = new Timer(tick, this);
        timer.start();
        addMouseListener(this);
        addKeyListener(this);
        setBackground(Color.gray);
    }
    
    public void paint(Graphics g) {
        g.setColor(Color.red);
        g.fillRect(x, y, w, h);
        g.setColor(Color.black);
        g.drawRect(0, 0, 350, 350);
        g.fillRect(0,200 + h,350,150);
        g.drawLine(0,100,350,100);
        repaint();
        if (erase == true) {
            g.setColor(Color.gray);
            g.fillRect(lastX, lastY, w, h);
            repaint();
        }
    }
    
    public void mouseClicked(MouseEvent evt) {}
    public void mouseEntered(MouseEvent evt) {}
    public void mouseExited(MouseEvent evt) {}
    public void mousePressed(MouseEvent evt) {
        
        if (evt.getY() < 100 && evt.getY() > 0) {
            lastX = x;
            lastY = y;
            cube.cubeJump(50);
            jump = true;
        } else {
            jump = false;
        }
        
        if (jump == false) {
            if (evt.getX() > 175 && evt.getX() < 350 && x < 350 - w ) {
                lastX = x;
                lastY = y;
                erase = true;
                cube.cubeMoveRight(w,0);
                repaint();

            } else if (evt.getX() < 175 && evt.getX() > 0 && x > 0) {
                lastX = x;
                lastY = y;
                erase = true;
                cube.cubeMoveLeft(w,0);
                repaint();

            } else {
                erase = false;
                repaint();
            }
        }
    }
    public void mouseReleased(MouseEvent evt) {}
    public void actionPerformed(ActionEvent evt) {
        count++;
        cube.cubeFall(25);
        erase = true;
        
    }
    public void keyPressed( KeyEvent e ) {}
    public void keyReleased( KeyEvent evt ) {}
    public void keyTyped( KeyEvent evt ) {}
}
